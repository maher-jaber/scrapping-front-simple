<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Scrapping Tels</title>
	<link rel="icon"
		href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
		crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">Scraping</a>
			<div class="collapse navbar-collapse">
				<ul class="navbar-nav ms-auto">
					<li class="nav-item"><a class="nav-link active" href="#" id="menuScraping">Scraping</a></li>
					<li class="nav-item"><a class="nav-link" href="#" id="menuHistorique">Historique</a></li>
				</ul>
			</div>
		</div>
	</nav>



	<div class="container-fluid py-4">
		<div class="row justify-content-center">
			<div class="col-12 col-xl-10">
				<!-- Header Card -->
				<div id="globalform" class="card border-0 shadow-lg mb-4">
					<div class="card-header bg-primary text-white py-3">
						<h1 class="h4 mb-0">Scraping entreprises France</h1>
					</div>
					<div class="card-body p-4">
						<form id="scrapingForm">
							<div class="row g-3 mb-4">
								<div class="col-md-3">
									<label for="codeNafSecteur" class="form-label fw-bold">Code NAF / Secteur</label>
									<div class="input-group position-relative">
										<span class="input-group-text">
											<i class="bi bi-building"></i>
										</span>
										<input type="text" id="codeNafSecteur" name="query"
											class="form-control form-control-lg uniform-input"
											placeholder="Ex : Restaurants" required>
										<!-- Container pour les suggestions -->
										<div id="autocomplete-list" class="autocomplete-items position-absolute w-100">
										</div>
									</div>
								</div>
								<div class="col-md-3">
									<label for="region" class="form-label fw-bold">Région</label>
									<div class="input-group">
										<span class="input-group-text">
											<i class="bi bi-map"></i>
										</span>
										<select id="region" name="region"
											class="form-select form-select-lg py-3 uniform-input" required>
											<option value="">Sélectionnez une région</option>

										</select>
									</div>
								</div>
								<div class="col-md-3">
									<label for="departement" class="form-label fw-bold">Département</label>
									<div class="input-group">
										<span class="input-group-text">
											<i class="bi bi-geo-alt"></i>
										</span>
										<select id="departement" name="departement"
											class="form-select form-select-lg py-3 uniform-input" required>
											<option value="">Sélectionnez un département</option>

										</select>
									</div>
								</div>
								<div class="col-md-3">
									<label for="ville" class="form-label fw-bold">Ville</label>
									<div class="input-group position-relative">
										<span class="input-group-text">
											<i class="bi bi-pin-map"></i>
										</span>
										<input type="text" id="ville" name="ville"
											class="form-control form-control-lg uniform-input"
											placeholder="Tapez le nom de la ville" required>
										<div id="ville-autocomplete" class="autocomplete-items position-absolute w-100">
										</div>
									</div>
								</div>
							</div>

							<div class="mb-4">
								<label class="form-label fw-bold">Source de données</label>
								<div class="d-flex flex-wrap gap-3">
									<div class="form-check card card-hover p-0 source-card">
										<input class="form-check-input d-none" type="radio" name="source"
											id="sourceGoogle" value="googlemaps" checked>
										<label class="form-check-label card-body d-flex align-items-center gap-2"
											for="sourceGoogle">
											<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/aa/Google_Maps_icon_%282020%29.svg/48px-Google_Maps_icon_%282020%29.svg.png"
												width="32" height="32" class="rounded">
											<span>Google Maps</span>
										</label>
									</div>
									<div class="form-check card card-hover p-0 source-card">
										<input class="form-check-input d-none" type="radio" name="source"
											id="sourcePagesJaunes" value="pagesjaunes">
										<label class="form-check-label card-body d-flex align-items-center gap-2"
											for="sourcePagesJaunes">
											<img src="https://www.pagesjaunes.fr/assets/images/logo_pagesjaunes-b41e5acdca.svg"
												width="32" height="32" class="rounded">
											<span>PagesJaunes.fr</span>
										</label>
									</div>
								</div>
							</div>

							<div class="row g-3 align-items-end">
								<div class="col-md-2">
									<label for="maxResults" class="form-label fw-bold">Nombre de résultats</label>
									<input type="number" id="maxResults" name="max_results"
										class="form-control form-control-lg" value="5" min="1" max="1000" required>
								</div>
								<div class="col-md-10 d-flex justify-content-end align-items-center gap-3">
									<button type="button" id="resetBtn" class="btn btn-outline-secondary btn-lg px-4">
										<i class="bi bi-arrow-counterclockwise me-2"></i>Réinitialiser
									</button>
									<button type="submit" class="btn btn-primary btn-lg px-4 position-relative">
										<span id="btnSpinner" class="spinner-border spinner-border-sm me-2 d-none"
											role="status"></span>
										<i class="bi bi-search me-2"></i>Rechercher
									</button>
								</div>
							</div>
						</form>
					</div>
				</div>

				<div id="historiqueSection" class="container-fluid py-4 d-none">
					<div id="historiqueFiltres"></div>
					<div id="historiqueTable"></div>

				</div>
				<!-- Results Section -->
				<div id="resultsSection" class="d-none">
					<div class="d-flex justify-content-between align-items-center mb-3">
						<div class="d-flex align-items-center">
							<div class="badge bg-primary rounded-pill me-2" id="resultsCount"></div>
							<div class="badge bg-info rounded-pill" id="elapsedTime"></div>
						</div>
					</div>
					<div class="card border-0 shadow">
						<div class="card-body p-0">
							<div class="d-flex justify-content-end mb-3">
								<button id="exportBtn" class="btn btn-success">
									<i class="bi bi-file-earmark-excel me-2"></i>Exporter en CSV
								</button>
							</div>
							<div class="table-responsive">
								<div id="resultsContainer"></div>
							</div>
							<!-- Pagination -->
							<nav aria-label="Page navigation" class="mt-3">
								<ul class="pagination justify-content-center" id="pagination">
									<!-- Les éléments de pagination seront générés dynamiquement -->
								</ul>
							</nav>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Loading Modal -->
	<div class="modal fade" id="loadingModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content border-0 shadow">
				<div class="modal-body text-center p-4">
					<div class="spinner-border text-primary mb-3" style="width: 3rem; height: 3rem;" role="status">
						<span class="visually-hidden">Loading...</span>
					</div>
					<h5 class="mb-1">Scraping en cours</h5>
					<p class="text-muted mb-0">Veuillez patienter pendant la collecte des données...</p>
					<div class="mt-2" id="loadingTime"></div>
				</div>
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
		crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

	<style>
		/* Style pour la pagination active */
		.page-item.active .page-link {
			background-color: #0d6efd;
			border-color: #0d6efd;
		}

		/* Style pour les liens de pagination */
		.page-link {
			color: #0d6efd;
			cursor: pointer;
		}

		/* Style pour la pagination responsive */
		@media (max-width: 576px) {
			.pagination {
				flex-wrap: wrap;
			}

			.page-item {
				margin-bottom: 5px;
			}
		}

		.autocomplete-items {
			position: absolute;
			/* positionné par rapport à l'input parent */
			top: 100%;
			/* juste en dessous de l'input */
			left: 0;
			right: 0;
			z-index: 1050;
			/* au-dessus des autres éléments Bootstrap */
			border: 1px solid #ced4da;
			border-top: none;
			background-color: #fff;
			max-height: 250px;
			overflow-y: auto;
			box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
			border-radius: 0 0 0.25rem 0.25rem;
		}

		/* Chaque élément de la liste */
		.autocomplete-item {
			padding: 0.5rem 1rem;
			cursor: pointer;
			font-size: 0.95rem;
			transition: background-color 0.2s;
		}

		.autocomplete-item:hover,
		.autocomplete-item.active {
			background-color: #0d6efd;
			color: #fff;
		}

		/* Pour éviter que le parent n'ait un overflow caché */
		.input-group.position-relative {
			z-index: 1000;
		}

		.autocomplete-match {
			font-weight: bold;
		}

		.card-hover {
			transition: all 0.2s ease;
			cursor: pointer;
			border: 1px solid #dee2e6;
		}

		.card-hover:hover {
			transform: translateY(-2px);
			box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.1);
		}

		.form-check-input:checked+.card-hover {
			border-color: #0d6efd;
			background-color: rgba(13, 110, 253, 0.05);
		}

		.table {
			--bs-table-bg: transparent;
		}

		.table thead th {
			border-bottom-width: 1px;
			text-transform: uppercase;
			font-size: 0.75rem;
			letter-spacing: 0.5px;
		}

		.table-hover tbody tr {
			transition: all 0.2s ease;
		}

		.table-hover tbody tr:hover {
			background-color: rgba(13, 110, 253, 0.05) !important;
		}

		.source-card.active {
			border: 2px solid #0d6efd !important;
			background-color: rgba(13, 110, 253, 0.05) !important;
		}

		.uniform-input {
			height: 58px !important;
			/* même hauteur partout */
			width: 80% !important;
			/* pleine largeur de la colonne */
			font-size: 1rem;
		}

		#elapsedTime {
			font-size: 0.85rem;
			padding: 0.35em 0.65em;
		}

		#loadingTime {
			font-size: 0.9rem;
		}

		/* Ajouter ceci à la section style */
		.histo-table-pagination {
			font-size: 0.85rem;
		}

		.histo-table-pagination .btn {
			padding: 0.25rem 0.5rem;
			font-size: 0.85rem;
		}
	</style>

	<link href="https://cdn.jsdelivr.net/npm/tom-select/dist/css/tom-select.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/tom-select/dist/js/tom-select.complete.min.js"></script>

	<script src="assets/js/app-core.js"></script>





		
</body>

</html>